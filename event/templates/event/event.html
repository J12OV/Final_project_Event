{% extends 'main.html' %}

{% block title %}Event: {{ Event.name }} {% endblock %}

{% block content %}
<div class="container-fluid">
<table class="table">
     <tr class="d-flex">
        <th class="col-4">Event name:</th>
         <th class="col-3">{{ event.name }}</th>
    </tr>
    <tr class="d-flex">
         <td class="col-4">Event category:</td>
         <td class="col-3">{{ event.category }}</td>
    </tr>
    <tr class="d-flex">
        <td class="col-4">Event type:</td>
        <td class="col-3">{{ event.typeonline }}</td>
    </tr>
    <tr class="d-flex">
        <td class="col-4">Event fysical:</td>
        <td class="col-3">{{ event.fysical }}</td>
    </tr>
    <tr class="d-flex">
        <td class="col-4">Location</td>
        <td class="col-3">{{ event.location }}</td>
    </tr>
    <tr class="d-flex">
        <td class="col-4">>Date from:</td>
        <td class="col-3">{{ event.startdatetime }}</td>
    </tr>
    <tr class="d-flex">
        <td class="col-4">Date till:</td>
        <td class="col-3">{{ event.enddatetime }}</td>
    </tr>
    <tr class="d-flex">
        <td class="col-4">>Organizer name:</td>
        <td class="col-3">{{ event.organizer }}</td>
    </tr>
    <tr class="d-flex">
        <td class="col-4">Description:</td>
        <td class="col-3">{{ event.descr }}</td>
    </tr>
        <form action="" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
     <tr class="d-flex">
            <td>Photo:
            <a href="{{ event.photo }}"><img src="{{ event.photo }}" width="50px"></a></td>
            <td class="col-10"><input type="file" name="upload" accept="*"></td>
     </tr>
     <tr class="d-flex">
            <td><label for="body">COMMENT: </label></td>
            <td><textarea name="body" id="body" rows="1" cols="100" > </textarea></td>
            <td><input type="submit" class="btn btn-success"value="Send"></td>
    </tr>
    <tr>
        </form>
    </tr>
</table>
</div>
<div class="container-fluid">
<form method="post" action="">
     {% csrf_token %}

    {% if request.user in event.participants.all %}
          <button class="btn btn-danger btn-lg" type="submit">I want to logout</button>
         <input class="form-check-input mx-3 form-control-lg" type="checkbox" name="logout" id="logout">
    {% else %}
        <button class="btn btn-success btn-lg" type="submit">I want to participate</button>
        <input class="form-check-input mx-3 form-control-lg" type="checkbox" name="participate" id="participate">
    {% endif %}

</form>
</div>
<div class="container-fluid mt-3">
    {% if event.user.id == request.user.id %}
    <a href="{% url 'edit_event' %}">EDIT EVENT</a>
    {% endif %}
    {% if event.host.id == request.user.id %}
    {% for participant in event.participants.all %}
    List of participants: {{ participant }} <br>
    {% endfor %}
    {% endif %}
</div>
<!--<div class="message-form">-->
<!--        <form action="" method="POST" enctype="multipart/form-data">-->
<!--            {% csrf_token %}-->
<!--            <label for="body">COMMENT: </label><br>-->
<!--            <textarea name="body" id="body" rows="1" cols="100" > </textarea><br>-->
<!--            <div class="B_upload_send">-->
<!--            <input type="file" name="upload" accept="*">  &lt;!&ndash; accept=".doc, .pdf, .txt ,image/*,*" &ndash;&gt;-->
<!--            <input type="submit" value="Send">-->
<!--            </div>-->
<!--        </form>-->
<!--</div>-->

    <div class="messages-box">
    {% for message in messages %}
        {% if message.user == request.user %}
            <div class="my-message">
                <div class="my-message-info">
                    <span class="message-user">{{ message.user }}</span>
                    <span class="message-time">{{ message.created }}</span>
                </div>
                <div class="my-message-body">{{ message.body }}</div>
                {% if message.file %}  <!-- zobrazit obrázek -->
                    <div class="my-message-file">
                        <a href="{{ message.file }}"><img src="{{ message.file }}" width="50px"></a>
                    </div>
                {% endif %}
            </div>
        {% else %}
            <div class="other-message">
                <div class="other-message-info">
                    <span class="message-user">{{ message.user }}</span>
                    <span class="message-time">{{ message.created }}</span>
                </div>
                <div class="other-message-body">{{ message.body }}</div>
                {% if message.file %}  <!-- zobrazit obrázek -->
                    <div class="other-message-file">
                        <a href="{{ message.file }}"><img src="{{ message.file }}" width="50px"></a>
                    </div>
                {% endif %}
            </div>
        {% endif %}
    {% endfor %}
    </div>
{% endblock %}










